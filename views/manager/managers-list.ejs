<!-- views/manager-list.ejs -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%= title %></title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <div id="managers-list" class="content-section">
      <div class="section-header">
        <h2>All Managers</h2>
        <button
          class="btn-primary-custom"
          onclick="switchTab(event, 'managers-add')"
        >
          <i class="fas fa-user-plus"></i> Add New Manager
        </button>
      </div>
<div class="section-header">
        <h2>All Managers</h2>
        <button
          class="btn-primary-custom"
          onclick="switchTab(event, 'managers-add')"
        >
          <a href=/admin/dashboard">Admin Dashboard</a>
        </button>
      </div>

      <div class="table-container">
        <table class="table">
          <thead>
            <tr>
              <th>ID</th>
              <th>Name</th>
              <th>Email</th>
              <th>Phone</th>
              <th>Department</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <% if (managers && managers.length > 0) { %> <%
            managers.forEach(manager => { %>
            <tr>
              <td>#<%= manager._id.toString().slice(-4) %></td>
              <td>
                <%= manager.userData ? manager.userData.name : 'User not found'
                %>
              </td>
              <td><%= manager.userData ? manager.userData.email : 'N/A' %></td>
              <td><%= manager.userData ? manager.userData.phone : 'N/A' %></td>
              <td><%= manager.department %></td>
              <td>
                <span
                  class="badge-status <%= manager.isActive ? 'badge-manager' : 'badge-inactive' %>"
                >
                  <%= manager.isActive ? 'Active' : 'Inactive' %>
                </span>
              </td>
              <td>
                <div class="action-buttons">
                  <button
                    class="btn-small btn-view"
                    onclick="viewManager('<%= manager._id %>')"
                  >
                    <i class="fas fa-eye"></i> View
                  </button>
                  <button
                    class="btn-small btn-edit"
                    onclick="editManager('<%= manager._id %>')"
                  >
                    <i class="fas fa-edit"></i> Edit
                  </button>
                  <button
                    class="btn-small btn-delete"
                    onclick="deleteManager('<%= manager._id %>')"
                  >
                    <i class="fas fa-trash"></i> Delete
                  </button>
                </div>
              </td>
            </tr>
            <% }); %> <% } else { %>
            <tr>
              <td colspan="7" style="text-align: center; color: #999">
                No managers found
              </td>
            </tr>
            <% } %>
          </tbody>
        </table>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
